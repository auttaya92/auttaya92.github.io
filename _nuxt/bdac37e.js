(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{521:function(e,t,n){"use strict";n.r(t);var r=n(4),l=(n(31),n(30),n(34),n(116),n(258),n(176),{middleware:"authenticated",data:function(){return{loading:!1,valid:!0,snackbar:!1,text:"ADDED a content success",timeout:2e3,title:"",link:"",subtitle:"",files:[],imageUrl:"",rules:[function(e){return!!e||"subtitle is required"},function(e){return e&&e.length<=250||"Max 250 characters"}],rulesImage:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}],dialog:!1,dialog2:!1,search:"",headers:[{text:"Title",align:"start",sortable:!1,value:"title"},{text:"Subtitle",align:"start",value:"subtitle"},{text:"Image",align:"center",value:"image"},{text:"Link",align:"center",value:"link"},{text:"Action ",align:"center",value:"delete"}],contents:[],prepareDeleteData:{}}},mounted:function(){this.getData()},methods:{closeDialog:function(){this.$refs.form.reset(),this.dialog=!1},openLink:function(e){window.open(e.link_post,"_blank")},handleSaveData:function(){this.$refs.form.validate()&&this.files.name&&(this.loading=!0,this.uploadImageFile(this.files))},uploadImageFile:function(e){var t=this;if(e.type.match("image.*")){var n={contentType:e.type};this.$fire.storage.ref("images/".concat(e.name)).put(e,n).then((function(e){e.ref.getDownloadURL().then((function(e){t.imageUrl=e,t.saveDataFirebase()}))})).catch((function(e){console.error("Error uploading image",e)}))}else alert("Please upload an image.")},saveDataFirebase:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.database.ref("content").push({title:e.title,subtitle:e.subtitle,imageUrl:e.imageUrl,link_post:e.link}).catch((function(e){return console.log(e.code,e.message)}));case 2:return n=t.sent,t.next=5,e.$fire.database.ref("content/"+n.key).update({path:"content/"+n.key}).catch((function(e){return console.log(e.code,e.message)}));case 5:r=t.sent,console.log("updateSubmit",r),e.getData(),e.dialog=!1,e.loading=!1,e.snackbar=!0,e.$refs.form.reset();case 12:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,e.$fire.database.ref("content/").once("value",(function(e){console.log(e.val());var data=e.val(),t=Object.values(data);n.contents=t})).catch((function(e){return console.log(e.message)}));case 3:r=t.sent,console.log("getcontents",r);case 5:case"end":return t.stop()}}),t)})))()},openDialogDelete:function(e){this.dialog2=!0,this.prepareDeleteData=e},deleteItem:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.database.ref(e.prepareDeleteData.path).remove().catch((function(e){return console.log(e.message)}));case 2:n=t.sent,console.log("deleteData",n),e.getData();case 5:case"end":return t.stop()}}),t)})))()}}}),o=n(69),c=n(85),d=n.n(c),v=n(179),f=n(398),m=n(394),h=n(505),k=n(388),x=n(515),_=n(509),D=n(510),w=n(429),V=n(140),y=n(506),C=n(421),I=n(386),S=n(404),T=n(511),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",[n("div",{staticClass:"text-right mb-3"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("\n        add content\n      ")])],1),e._v(" "),n("v-card",[n("v-card-title",[e._v("\n        Management contents\n        "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.contents,search:e.search},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[n("v-img",{attrs:{contain:"","max-height":"110","max-width":"116",src:t.imageUrl}})]}},{key:"item.link",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{rounded:"",color:"primary",dark:""},on:{click:function(t){return e.openLink(r)}}},[e._v("\n            link\n          ")])]}},{key:"item.delete",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{rounded:"",color:"error",dark:""},on:{click:function(t){return e.openDialogDelete(r)}}},[e._v("\n            Delete\n          ")])]}}],null,!0)})],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("ADD CONTENT")])]),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Ttitle",rules:[function(e){return!!e||"Title is required"}]},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{counter:"",label:"Subtitle","auto-grow":"",outlined:"",rows:"4","row-height":"30",shaped:"",rules:e.rules},model:{value:e.subtitle,callback:function(t){e.subtitle=t},expression:"subtitle"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Link website",rules:[function(e){return!!e||"link is required"}]},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",rules:e.rulesImage,placeholder:"Pick an Image","prepend-icon":"mdi-camera",label:"Image"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)],1)],1),e._v(" "),n("small",[e._v("*indicates required field")])],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v("\n            Close\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:e.handleSaveData}},[e._v("\n            Save\n          ")])],1)],1)],1)],1),e._v(" "),n("v-snackbar",{attrs:{timeout:e.timeout,absolute:"",top:"",color:"success",outlined:"",right:""},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",r,!1),[e._v("\n        Close\n      ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n    ")]),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("\n        Do you want to delete this information?\n      ")]),e._v(" "),n("v-card-text",[e._v(e._s(e.prepareDeleteData.title))]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog2=!1}}},[e._v("\n          Close\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"error",text:""},on:{click:e.deleteItem}},[e._v(" Delete ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VCol:h.a,VContainer:k.a,VDataTable:x.a,VDialog:_.a,VFileInput:D.a,VForm:w.a,VImg:V.a,VRow:y.a,VSnackbar:C.a,VSpacer:I.a,VTextField:S.a,VTextarea:T.a})}}]);